> 计算机中最重要的是数据，数据库是管理数据的。为了更好的管理数据，需要把数据划分类型。🙃

![](https://photohosting.oss-cn-hangzhou.aliyuncs.com/notionCover/c8049b9b880411ebb6edd017c2d2eca2.jpg)

## 为什么要有数据类型

当我们谈到数据库中的数据类型时，可以将其想象为**一种规定了每个数据在数据库中如何存储和处理的"规则"**。这些规则是非常重要的，因为它们直接影响数据库的性能、存储效率和数据的完整性。

首先，选择适合的数据类型可以节省存储空间。不同的数据类型占用的空间不同，所以选择更紧凑的数据类型可以避免浪费空间。例如，使用整数类型存储一个数值通常比使用字符串类型更节省空间。

其次，正确选择数据类型可以提高数据库的性能。数据库可以根据数据类型进行各种优化来提高查询和操作的速度。例如，数值类型比字符串类型更容易进行比较和计算，因此可以更快地执行查询。

此外，数据类型还可以确保数据的有效性和一致性。通过指定数据类型，我们可以限制某些列只能存储特定类型的数据，这可以防止插入无效或错误的数据。

另外，数据类型也对内存管理和索引优化非常重要。合理选择数据类型可以帮助优化内存使用，并提高索引的性能。

总之，选择适当的数据类型可以节省存储空间，提高数据库性能，确保数据的完整性和准确性，以及优化内存管理和索引性能。因此，在设计数据库时，仔细考虑数据类型是非常重要的。

## 有哪些数据类型

在数据库设计中，了解和使用合适的数据类型是至关重要的。以下是数据库中常见的数据类型：

### 1. 整数类型

- **TINYINT**: 存储非常小的整数，通常占用1个字节。范围是 -128 到 127 或 0 到 255（无符号）。

- **SMALLINT**: 存储较小的整数，通常占用2个字节。范围是 -32,768 到 32,767 或 0 到 65,535（无符号）。

- **MEDIUMINT**: 存储中等大小的整数，通常占用3个字节。范围是 -8,388,608 到 8,388,607 或 0 到 16,777,215（无符号）。

- **INT**: 存储标准整数，通常占用4个字节。范围是 -2,147,483,648 到 2,147,483,647 或 0 到 4,294,967,295（无符号）。

- **BIGINT**: 存储大整数，通常占用8个字节。范围是 -9,223,372,036,854,775,808 到 9,223,372,036,854,775,807 或 0 到 18,446,744,073,709,551,615（无符号）。

### 2. 浮点和定点数类型

- **FLOAT**: 存储单精度浮点数，通常占用4个字节。适用于需要节省存储空间并能容忍少量精度损失的场景。

- **DOUBLE**: 存储双精度浮点数，通常占用8个字节。适用于需要更高精度的计算。

- **DECIMAL**: 定点数类型，用于高精度和准确的数值存储，特别适合金融计算。用户可以定义总位数和小数位数。

### 3. 字符串类型

- **CHAR**: 固定长度字符串。无论实际存储的字符数是多少，都占用指定长度的空间，适用于存储长度固定的数据，如国家代码。

- **VARCHAR**: 可变长度字符串。根据实际存储的字符数占用空间，适用于存储长度不确定的数据，如名称和地址。

- **TEXT**: 用于存储长文本数据，可容纳大量字符。适用于存储大篇幅的文本，如文章或评论。

- **BLOB**: 二进制大对象，用于存储二进制数据，如图像、音频或视频文件。

### 4. 日期和时间类型

- **DATE**: 存储日期数据，包括年、月和日，格式通常为 'YYYY-MM-DD'。

- **TIME**: 存储时间数据，包括时、分和秒，格式通常为 'HH:MM:SS'。

- **DATETIME**: 存储日期和时间的组合，格式通常为 'YYYY-MM-DD HH:MM:SS'。

- **TIMESTAMP**: 存储时间戳数据，通常用于记录数据的创建或修改时间。格式与 `DATETIME` 类似，但受系统时区影响。

- **YEAR**: 存储年份数据，通常为2位或4位数字。

### 5. 布尔类型

- **BOOLEAN** 或 **BOOL**: 存储布尔值，实际上通常被实现为 `TINYINT(1)`。可以表示真 (`TRUE`) 或假 (`FALSE`)。

### 6. 其他类型

- **ENUM**: 枚举类型，允许列中的值从预定义的一组值中选择。适用于存储状态或类别信息。

- **SET**: 集合类型，类似于枚举，但允许一个列存储多个预定义值的组合。

> 以下为不重要的数据类型，现在仅作为了解使用。😒

### 7. JSON 和 XML 类型

- **JSON**: 存储 JSON 格式的数据，适用于需要存储复杂嵌套结构的场景。例如，用户配置或日志信息。

- **XML**: 存储 XML 格式的数据，适用于需要与 XML 系统集成的场景。

### 8. 空间数据类型

- **GEOMETRY**: 通用的空间数据类型，用于存储任何几何图形。
  
- **POINT**: 存储一个点的坐标（X, Y）。

- **LINESTRING**: 存储一系列点，表示一条线。

- **POLYGON**: 存储一个多边形。

这些类型特别适用于地理信息系统 (GIS) 应用。

### 9. 位类型

- **BIT**: 存储位字段，可以存储位数多达 64 位。适用于存储二进制标志，如权限位图。

### 10. UUID（Universally Unique Identifier）

- **UUID**: 存储通用唯一标识符，通常为 128 位长的唯一值。适用于需要生成全球唯一标识符的场景，例如分布式系统中的主键。

### 11. 数组类型

- **ARRAY**: 用于存储一组相同类型的元素。常见于 PostgresQL 和其他少数数据库中，适用于需要在单个列中存储多个值的场景。

### 12. 范围类型

- **RANGE**: 表示一个范围，可以是数字、日期或其他有序类型。适用于需要表示区间的数据，如日期范围、数值范围等。

### 13. 网络地址类型

- **INET**: 存储 IPv4 或 IPv6 地址。

- **CIDR**: 存储 IPv4 或 IPv6 网络块。

- **MACADDR**: 存储 MAC 地址。

这些类型适用于网络管理和分析等应用场景。

### 14. 自定义类型

许多数据库系统允许用户定义自己的数据类型（User-Defined Types，UDT），以满足特定的需求。这些自定义类型可以包括复杂的结构和行为，适用于特定业务逻辑。

### 15. 特殊类型（一些数据库特有）

- **SERIAL** 和 **BIGSERIAL**: 在 PostgreSQL 中，用于自动递增的整数，适合做主键。

- **MONEY**: 用于存储货币金额，有时提供特定的精度和格式。

- **INTERVAL**: 表示时间间隔，适用于需要计算时间差异的场景。

### 16. 多媒体类型

- **IMAGE**: 专门存储图像数据，常见于 SQL Server 中。

- **SOUND**: 用于音频数据，虽然较少见，但在特定多媒体数据库中存在。

### 17. 通用类型

- **ANY**: 一些数据库支持的通用类型，可以存储任何类型的数据。适用于需要高度灵活性的场景。

这些附加的数据类型进一步扩展了数据库的功能和应用场景。在实际应用中，选择合适的数据类型不仅有助于优化存储，还能提高查询性能和数据处理的效率。因此，在设计数据库时，应根据具体需求仔细选择最合适的数据类型。



## 补充

在 MySQL 中，无法直接像在某些其他数据库系统（例如 PostgreSQL）中那样创建完全自定义的基础数据类型。然而，你可以通过以下几种方式实现类似于自定义数据类型的效果：

### 1. 使用 ENUM 和 SET 类型

`ENUM` 和 `SET` 类型允许你定义一个有限的值集合，这在某些情况下可以作为简化版的自定义数据类型使用。

```sql
CREATE TABLE example_enum (
    status ENUM('active', 'inactive', 'pending')
);
```

### 2. 使用存储过程和函数进行数据验证

虽然不能创建新的基础类型，但你可以使用存储过程和用户定义函数来确保插入的数据符合特定的格式或规则。

```sql
DELIMITER //
CREATE FUNCTION validate_custom_data(input_value VARCHAR(255)) RETURNS BOOLEAN
BEGIN
    IF input_value REGEXP '^[A-Za-z0-9]+$' THEN
        RETURN TRUE;
    ELSE
        RETURN FALSE;
    END IF;
END//
DELIMITER ;
```

### 3. 使用触发器进行数据验证和转换

通过触发器，你可以在插入或更新数据时进行验证，确保数据符合特定的格式或规则。

```sql
CREATE TRIGGER validate_insert BEFORE INSERT ON your_table
FOR EACH ROW
BEGIN
    IF NEW.your_column NOT REGEXP '^[A-Za-z0-9]+$' THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Invalid data format';
    END IF;
END;
```

### 4. 组合字段

通过组合多个基础字段，你可以创建复杂的数据结构。例如，想要创建一个复合类型表示地址，可以分解为多个字段：

```sql
CREATE TABLE address (
    street VARCHAR(255),
    city VARCHAR(100),
    state VARCHAR(100),
    zip_code VARCHAR(20)
);
```

### 5. 视图(Views)

使用视图，你可以创建一个逻辑上的自定义数据类型，将多列组合成一个结构，以便于查询。

```sql
CREATE VIEW custom_view AS
SELECT CONCAT(street, ', ', city, ', ', state, ' ', zip_code) AS full_address
FROM address;
```

### 6. JSON 数据类型

MySQL 从 5.7 开始支持 JSON 数据类型，你可以使用它来存储复杂的嵌套数据结构，类似于自定义数据类型。

```sql
CREATE TABLE example_json (
    id INT AUTO_INCREMENT PRIMARY KEY,
    data JSON
);

INSERT INTO example_json (data) VALUES ('{"name": "John", "age": 30, "city": "New York"}');
```

### 7. 使用插件或自定义编译

对于非常特殊的需求，可以考虑使用 MySQL 的插件机制，或者从源代码编译 MySQL 并添加自己的数据类型。然而，这种方法需要深入的数据库系统知识和编程能力，不适用于一般的应用场景。



<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=27646199&auto=1&height=66"></iframe>
